// 主题切换开关样式
@import 'variables'

.theme-toggle
  --base-scale: 16px
  --toggle-width: 3.5em
  --toggle-height: 1.6em
  --radius-pill: 100em
  --sun-diameter: 1.3em
  --sun-offset: calc((var(--toggle-height) - var(--sun-diameter)) / 2)

  // 云朵配置
  --cloud-scale: 0.7
  --cloud-size: calc(0.8em * var(--cloud-scale))  // 云朵主体直径

  // 云朵位置偏移（正值向左移动）
  // 云朵 cloud-offset-y 向下偏移
  --cloud-offset-x: 0em
  --cloud-offset-y: 1.7em

  --bg-toggle-light: #3d7eae
  --bg-toggle-dark: #1d1f2c
  --color-sun: #ffdd00
  --color-moon: #c4c9d1
  --color-crater: #959db1
  --color-star: #fff
  --color-cloud-front: #f3fdff
  --color-cloud-back: #aacadf

  --shadow-primary: rgba(0, 0, 0, 0.25)
  --shadow-highlight: rgba(255, 255, 255, 0.94)
  --halo-color: rgba(255, 255, 255, 0.1)

  font-size: var(--base-scale)
  background: none
  border: none
  padding: 0
  cursor: pointer
  -webkit-app-region: no-drag

.theme-toggle__container
  width: var(--toggle-width)
  height: var(--toggle-height)
  background-color: var(--bg-toggle-dark)
  border-radius: var(--radius-pill)
  cursor: pointer
  position: relative
  transition: background-color 0.3s ease
  overflow: hidden
  box-shadow: 0.06em 0.06em 0.125em var(--shadow-highlight)

body.light-theme .theme-toggle__container
  background-color: var(--bg-toggle-light)

.theme-toggle__container::after
  content: ""
  position: absolute
  inset: 0
  box-shadow: 0em 0.05em 0.187em rgba(0, 0, 0, 0.5) inset
  border-radius: var(--radius-pill)
  pointer-events: none

.theme-toggle__sun
  width: var(--sun-diameter)
  height: var(--sun-diameter)
  background-color: var(--color-sun)
  border-radius: 50%
  position: absolute
  top: var(--sun-offset)
  transform: translateX(
    calc(var(--toggle-width) - var(--sun-diameter) - var(--sun-offset))
  )
  box-shadow: 0.05em 0.125em 0.125em var(--shadow-primary),
    0em 0.05em 0.125em var(--shadow-primary),
    0.05em 0.05em 0.05em 0em rgba(254, 255, 239, 0.61) inset,
    0em -0.05em 0.05em 0em #a1872a inset,
    0 0 0 0.625em var(--halo-color),
    0 0 0 1.25em var(--halo-color),
    0 0 0 1.875em var(--halo-color)
  transition: transform 0.3s ease
  overflow: hidden
  z-index: 3

body.light-theme .theme-toggle__container .theme-toggle__sun
  transform: translateX(var(--sun-offset))

.theme-toggle__moon-mask
  position: relative
  width: 100%
  height: 100%
  background-color: var(--color-moon)
  border-radius: inherit
  transform: translateX(0)
  transition: transform 0.3s ease
  box-shadow: 0.062em 0.062em 0.062em 0em rgba(254, 255, 239, 0.61) inset,
    0em -0.062em 0.062em 0em #969696 inset
  z-index: 1

body.light-theme .theme-toggle__container .theme-toggle__moon-mask
  transform: translateX(100%)

.theme-toggle__crater
  position: absolute
  background-color: var(--color-crater)
  border-radius: 50%
  box-shadow: 0em 0.03em 0.06em var(--shadow-primary) inset
  z-index: 2

.theme-toggle__crater:nth-of-type(1)
  top: 0.5em
  left: 0.2em
  width: 0.5em
  height: 0.5em

.theme-toggle__crater:nth-of-type(2)
  top: 0.6em
  left: 0.9em
  width: 0.25em
  height: 0.25em

.theme-toggle__crater:nth-of-type(3)
  top: 0.2em
  left: 0.55em
  width: 0.15em
  height: 0.15em

.theme-toggle__stars
  position: absolute
  left: 0.2em
  top: 0.3em
  transform: translateY(0)
  transition: transform 0.3s ease
  width: 1.8em
  color: var(--color-star)
  z-index: 2

body.light-theme .theme-toggle__container .theme-toggle__stars
  transform: translateY(-1.3em)
  opacity: 0

.theme-toggle__clouds
  position absolute
  // 修复：直接计算位置
  left calc(var(--toggle-width) - calc(0.8em * var(--cloud-scale)) - calc(3em * var(--cloud-scale)) + calc(var(--cloud-offset-x) * var(--cloud-scale)))
  top calc(var(--toggle-height) - calc(0.8em * var(--cloud-scale)) - calc(1.4em * var(--cloud-scale)) + calc(var(--cloud-offset-y) * var(--cloud-scale)))

  // 默认（深色模式）：云朵隐藏在容器右侧外部
  transform translateX(calc(3em * var(--cloud-scale)))
  opacity 0

  // 云朵主体
  width var(--cloud-size)
  height var(--cloud-size)
  background-color var(--color-cloud-front)
  border-radius 50%

  // 云朵阴影 - 向右延伸
  box-shadow calc(0.6em * var(--cloud-scale)) calc(0.2em * var(--cloud-scale)) 0 0 var(--color-cloud-front), calc(0.9em * var(--cloud-scale)) calc(0.25em * var(--cloud-scale)) 0 0 var(--color-cloud-front), calc(1.4em * var(--cloud-scale)) 0 0 0 var(--color-cloud-front), calc(1.9em * var(--cloud-scale)) calc(0.2em * var(--cloud-scale)) 0 0 var(--color-cloud-front), calc(2.3em * var(--cloud-scale)) calc(-0.04em * var(--cloud-scale)) 0 0 var(--color-cloud-front), calc(2.9em * var(--cloud-scale)) calc(-0.2em * var(--cloud-scale)) 0 0 var(--color-cloud-front), calc(3em * var(--cloud-scale)) calc(-1.1em * var(--cloud-scale)) 0 calc(0.28em * var(--cloud-scale)) var(--color-cloud-front), calc(-0.2em * var(--cloud-scale)) calc(-0.2em * var(--cloud-scale)) 0 0 var(--color-cloud-back), calc(0.32em * var(--cloud-scale)) calc(-0.08em * var(--cloud-scale)) 0 0 var(--color-cloud-back), calc(0.8em * var(--cloud-scale)) calc(-0.04em * var(--cloud-scale)) 0 0 var(--color-cloud-back), calc(1.3em * var(--cloud-scale)) calc(-0.2em * var(--cloud-scale)) 0 0 var(--color-cloud-back), calc(1.7em * var(--cloud-scale)) 0 0 0 var(--color-cloud-back), calc(2.2em * var(--cloud-scale)) calc(-0.28em * var(--cloud-scale)) 0 0 var(--color-cloud-back), calc(2.6em * var(--cloud-scale)) calc(-0.4em * var(--cloud-scale)) 0 0 var(--color-cloud-back), calc(2.7em * var(--cloud-scale)) calc(-1.4em * var(--cloud-scale)) 0 calc(0.28em * var(--cloud-scale)) var(--color-cloud-back)

  transition transform 0.3s ease, opacity 0.3s ease
  z-index 2

// 浅色模式：云朵从右侧滑入显示
body.light-theme .theme-toggle__container .theme-toggle__clouds
  transform translateX(0)
  opacity 1

.theme-toggle__container:hover .theme-toggle__sun
  transform: translateX(
    calc(
      var(--toggle-width) - var(--sun-diameter) - var(--sun-offset) - 0.15em
    )
  )

body.light-theme .theme-toggle__container:hover .theme-toggle__sun
  transform: translateX(calc(var(--sun-offset) + 0.15em))
