// macOS 风格系统依赖标签页样式
@import 'variables'

// 依赖列表容器
.deps-list
  display flex
  flex-direction column
  gap 2px  // 减小间距，使列表更紧凑

  // 隐藏滚动条（如果内容溢出）
  &::-webkit-scrollbar
    display none

  scrollbar-width none
  -ms-overflow-style none

// 依赖项样式（macOS 风格）
.dep-item
  display flex
  justify-content space-between
  align-items center
  padding 8px 16px  // 减小垂直内边距，使依赖项更紧凑
  background var(--bg-secondary)
  border 1px solid var(--border)
  border-radius 8px
  transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)
  position relative
  overflow hidden

  // 悬停效果
  &:hover
    background var(--bg-tertiary)
    border-color var(--border)
    box-shadow 0 1px 2px var(--shadow)

  // 左侧装饰线
  &::before
    content ''
    position absolute
    left 0
    top 0
    bottom 0
    width 3px
    background var(--border)
    transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)

  // 已安装状态
  &.installed::before,
  .dep-status.installed ~ *::before
    background var(--success)

  // 未安装状态
  &.missing::before,
  .dep-status.missing ~ *::before
    background var(--error)

.dep-name
  font-size 13px
  font-weight 500
  color var(--text-primary)
  display flex
  align-items center
  gap 10px
  flex 1
  letter-spacing -0.01em
  cursor pointer
  user-select none
  position relative

  .dep-expand-icon
    font-size 10px
    color var(--text-secondary)
    transition transform 0.2s cubic-bezier(0.4, 0, 0.2, 1)
    flex-shrink 0
    width 16px
    height 16px
    min-width 16px
    text-align center
    cursor pointer
    user-select none
    pointer-events auto
    display inline-flex
    align-items center
    justify-content center
    line-height 1
    font-family 'SF Mono', 'Monaco', 'Menlo', 'Courier New', monospace
    direction ltr
    unicode-bidi bidi-override

.dep-number
  display inline-flex
  align-items center
  justify-content center
  width 18px  // 稍微减小尺寸
  height 18px  // 稍微减小尺寸
  background var(--bg-tertiary)
  border-radius 5px
  font-weight 600
  font-size 11px  // 稍微减小字体
  color var(--text-secondary)
  margin-right 0
  flex-shrink 0
  transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)

  // 已安装状态 - 绿色
  &.installed
    background rgba(52, 199, 89, 0.15)
    color var(--success)
    border 1px solid rgba(52, 199, 89, 0.3)

  // 未安装状态 - 红色
  &.missing
    background rgba(255, 59, 48, 0.15)
    color var(--error)
    border 1px solid rgba(255, 59, 48, 0.3)

.dep-status
  display flex
  align-items center
  gap 6px
  font-size 11px  // 稍微减小字体
  font-weight 500
  padding 3px 10px  // 减小内边距
  border-radius 6px
  transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)
  letter-spacing 0.01em

  // 已安装状态
  &.installed
    background rgba(52, 199, 89, 0.15)
    color var(--success)
    border 1px solid rgba(52, 199, 89, 0.3)

    &::before
      content ''
      width 12px
      height 12px
      background-image url('src/imgs/svg/check.svg')
      background-size contain
      background-repeat no-repeat
      background-position center
      filter brightness(0) saturate(100%) invert(60%) sepia(90%) saturate(400%) hue-rotate(120deg) brightness(95%) contrast(90%)

  // 未安装状态
  &.missing
    background rgba(255, 59, 48, 0.15)
    color var(--error)
    border 1px solid rgba(255, 59, 48, 0.3)

    &::before
      content ''
      width 12px
      height 12px
      background-image url('src/imgs/svg/failure.svg')
      background-size contain
      background-repeat no-repeat
      background-position center
      filter brightness(0) saturate(100%) invert(50%) sepia(90%) saturate(500%) hue-rotate(340deg) brightness(100%) contrast(90%)

// 安装指引卡片（折叠在依赖项下方）
.install-guide-card
  background var(--bg-secondary)
  border 1px solid var(--border)
  border-radius 8px
  padding 12px 16px
  margin-top 2px  // 减小上边距
  margin-left 30px
  max-height 0
  overflow hidden
  opacity 0
  transition max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), margin 0.3s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.15s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.15s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.15s cubic-bezier(0.4, 0, 0.2, 1)

  &:not(.collapsed)
    max-height 1000px
    opacity 1
    margin-top 2px  // 减小上边距
    margin-bottom 2px  // 减小下边距

    &:hover
      background var(--bg-tertiary)
      border-color var(--border)
      box-shadow 0 1px 2px var(--shadow)

.guide-header
  display flex
  justify-content space-between
  align-items center
  margin-bottom 10px

  h3
    font-size 14px
    font-weight 500
    color var(--text-primary)
    margin 0
    letter-spacing -0.01em

  .guide-status
    padding 4px 10px
    border-radius 5px
    font-size 11px
    font-weight 500

    &.missing
      background rgba(255, 59, 48, 0.15)
      color var(--error)
      border 1px solid rgba(255, 59, 48, 0.3)

    &.installed
      background rgba(52, 199, 89, 0.15)
      color var(--success)
      border 1px solid rgba(52, 199, 89, 0.3)

.guide-description
  font-size 12px
  color var(--text-secondary)
  line-height 1.5
  margin-bottom 12px

.guide-command
  margin-bottom 12px

  label
    display block
    font-size 11px
    font-weight 500
    color var(--text-secondary)
    margin-bottom 6px

  .command-box
    display flex
    align-items center
    gap 8px
    padding 10px
    background var(--bg-tertiary)
    border 1px solid var(--border)
    border-radius 6px
    transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)

    &:hover
      border-color var(--accent)

    .command-text
      flex 1
      font-family 'SF Mono', 'Monaco', 'Menlo', 'Courier New', monospace
      font-size 12px
      color var(--text-primary)
      word-break break-all
      margin 0

    .btn-copy
      flex-shrink 0
      width 32px
      height 32px
      display flex
      align-items center
      justify-content center
      background transparent
      border 1px solid var(--border)
      border-radius 5px
      cursor pointer
      transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)
      color var(--text-secondary)

      &:hover
        background var(--bg-secondary)
        border-color var(--accent)
        color var(--accent)

      &:active
        transform scale(0.95)

      svg
        width 16px
        height 16px

.guide-instructions
  font-size 11px
  color var(--text-secondary)
  line-height 1.5
  margin 0
  padding 10px
  background var(--bg-tertiary)
  border-radius 6px
  border-left 3px solid var(--accent)

@keyframes slideDown
  from
    opacity 0
    transform translateY(-8px)
  to
    opacity 1
    transform translateY(0)

// 空状态
.deps-empty
  text-align center
  padding 50px 20px
  color var(--text-secondary)

  .empty-icon
    font-size 40px
    margin-bottom 12px
    opacity 0.4

  p
    font-size 15px
    margin 6px 0

// 浅色模式调整
body.light-theme
  .dep-item
    &:hover
      box-shadow 0 1px 2px var(--light-shadow)

  .install-guide-card
    &:not(.collapsed):hover
      box-shadow 0 1px 2px var(--light-shadow)

  .command-box
    background var(--light-bg-tertiary)

  .guide-instructions
    background var(--light-bg-tertiary)
