// macOS 风格 NTFS 设备标签页样式
@import 'variables'

// Devices页面独立窗口样式（浏览器窗口）
.devices-page
  display flex
  flex-direction column
  height 100vh
  overflow hidden
  background var(--bg-primary)
  transition background-color 0.25s cubic-bezier(0.4, 0, 0.2, 1)

.devices-header
  display flex
  align-items center
  height 28px
  flex-shrink 0
  -webkit-app-region drag
  position relative

.devices-traffic-lights
  width 78px
  height 100%
  -webkit-app-region no-drag
  flex-shrink 0

.devices-content
  flex 1
  overflow hidden
  display flex
  flex-direction column
  min-height 0

  .section
    flex 1
    margin 0
    border none
    border-radius 0
    padding 8px
    overflow-y auto
    overflow-x hidden
    box-shadow none
    background var(--bg-primary)
    transition background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1)
    display flex
    flex-direction column
    min-height 0

  .devices-section-header
    display flex
    justify-content flex-end
    align-items center
    margin-bottom 8px
    flex-shrink 0
    gap 4px

    h2
      display none

  .devices-header-actions
    display flex
    gap 3px
    align-items center
    flex-wrap wrap

    .auto-mount-checkbox
      display flex
      align-items center
      gap 4px
      font-size 10px
      color var(--text-primary)
      cursor pointer
      user-select none
      padding 3px 6px
      border-radius 3px
      transition background-color 0.15s ease
      white-space nowrap

      &:hover
        background var(--bg-tertiary)

      input[type="checkbox"]
        width 12px
        height 12px
        cursor pointer
        accent-color var(--accent)

      span
        font-weight 500
        letter-spacing -0.01em

    .devices-action-buttons
      display flex
      gap 3px
      align-items center
      flex-shrink 0

    .btn
      padding 3px 8px
      font-size 9px
      white-space nowrap
      min-height 20px
      line-height 1.3

  .devices-list
    gap 5px

  .device-item
    padding 8px 12px
    transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)

  .device-header
    margin-bottom 6px

  .device-name
    font-size 11px
    gap 6px

    .device-icon
      width 20px
      height 20px

      &::before
        width 14px
        height 14px

  .device-status
    padding 2px 7px
    font-size 9px

  .device-info
    margin-bottom 6px
    padding 6px 10px
    font-size 10px
    transition background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.2s cubic-bezier(0.4, 0, 0.2, 1)

  .device-info-item
    font-size 9px
    gap 5px

    .device-info-label
      min-width 45px
      font-size 9px

  .device-actions
    justify-content flex-end
    margin-top 4px
    gap 5px

    .btn
      padding 4px 10px
      font-size 9px
      min-height 20px
      line-height 1.3

  .empty-state
    padding 30px 12px

    .empty-icon
      width 40px
      height 40px
      margin-bottom 10px

      &::before
        width 24px
        height 24px

    p
      font-size 11px
      margin 5px 0

    .empty-hint
      font-size 9px
      margin-top 3px

// 设备容器（统一布局）
.devices-container
  display flex
  flex-direction column
  flex 1
  min-height 0
  padding 16px 20px
  overflow-y auto
  overflow-x hidden

  // 滚动条样式
  &::-webkit-scrollbar
    width 6px

  &::-webkit-scrollbar-track
    background transparent

  &::-webkit-scrollbar-thumb
    background var(--border)
    border-radius 3px

    &:hover
      background var(--accent)

  // 标题区域
  .section-header
    display flex
    justify-content space-between
    align-items center
    margin-bottom 12px
    flex-shrink 0

    h2
      font-size 15px
      font-weight 500
      color var(--text-primary)
      letter-spacing -0.01em
      margin 0

    .header-actions
      display flex
      gap 8px
      align-items center

      .auto-mount-checkbox
        display flex
        align-items center
        gap 6px
        font-size 13px
        color var(--text-primary)
        cursor pointer
        user-select none
        padding 4px 8px
        border-radius 4px
        transition background-color 0.15s ease

        &:hover
          background var(--bg-tertiary)

        input[type="checkbox"]
          width 16px
          height 16px
          cursor pointer
          accent-color var(--accent)

        span
          font-weight 500
          letter-spacing -0.01em

// 设备列表容器
.devices-list
  display flex
  flex-direction column
  gap 8px
  flex-shrink 0

// 设备项样式（macOS 风格）
.device-item
  background var(--bg-secondary)
  border 1px solid var(--border)
  border-radius 8px
  padding 12px 16px
  transition all 0.2s cubic-bezier(0.4, 0, 0.2, 1)
  position relative
  overflow hidden
  opacity 1
  transform translateZ(0)
  will-change auto

  // 悬停效果
  &:hover
    background var(--bg-tertiary)
    border-color var(--border)
    box-shadow 0 1px 2px var(--shadow)

  // 左侧装饰条
  &::before
    content ''
    position absolute
    left 0
    top 0
    bottom 0
    width 3px
    background var(--border)
    transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)

  // 只读设备
  &.read-only::before
    background var(--warning)

  // 读写设备
  &.read-write::before
    background var(--success)

  // 已卸载设备
  &.unmounted-device::before
    background var(--text-secondary)

// 设备头部
.device-header
  display flex
  justify-content space-between
  align-items center
  margin-bottom 10px

.device-name
  display flex
  align-items center
  gap 8px
  font-size 13px
  font-weight 500
  color var(--text-primary)
  letter-spacing -0.01em

  .device-icon
    width 24px
    height 24px
    display flex
    align-items center
    justify-content center
    background var(--bg-tertiary)
    border-radius 5px
    flex-shrink 0

    // 使用 SVG 图标
    &::before
      content ''
      width 18px
      height 18px
      background-image url('src/imgs/svg/flash-drive.svg')
      background-size contain
      background-repeat no-repeat
      background-position center
      opacity 0.7

// 设备状态标签（macOS 风格）
.device-status
  display inline-flex
  align-items center
  gap 4px
  padding 3px 10px
  border-radius 5px
  font-size 11px
  font-weight 500
  transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)
  letter-spacing 0.01em

  // 只读状态
  &.read-only
    background rgba(255, 149, 0, 0.15)
    color var(--warning)
    border 1px solid rgba(255, 149, 0, 0.3)

  // 读写状态
  &.read-write
    background rgba(52, 199, 89, 0.15)
    color var(--success)
    border 1px solid rgba(52, 199, 89, 0.3)

    &::before
      content ''
      width 10px
      height 10px
      background-image url('src/imgs/svg/check.svg')
      background-size contain
      background-repeat no-repeat
      background-position center
      filter brightness(0) saturate(100%) invert(60%) sepia(90%) saturate(400%) hue-rotate(120deg) brightness(95%) contrast(90%)

  // 已卸载状态
  &.unmounted
    background rgba(142, 142, 147, 0.15)
    color var(--text-secondary)
    border 1px solid rgba(142, 142, 147, 0.3)

// 设备信息
.device-info
  display flex
  flex-direction column
  gap 6px
  margin-bottom 10px
  padding 8px 12px
  background var(--bg-tertiary)
  border-radius 6px
  border 1px solid var(--border)

.device-info-item
  display flex
  align-items center
  gap 8px
  font-size 12px
  color var(--text-secondary)

  .device-info-label
    font-weight 500
    color var(--text-primary)
    min-width 60px
    flex-shrink 0

  span:not(.device-info-label)
    color var(--text-secondary)
    font-family 'SF Mono', 'Monaco', 'Menlo', 'Courier New', monospace
    font-size 11px
    word-break break-all

// 设备操作按钮
.device-actions
  display flex
  gap 8px
  flex-wrap wrap
  justify-content flex-end

  .mount-btn,
  .unmount-btn
    flex 0 0 auto
    padding 6px 16px
    font-size 12px
    font-weight 500
    border-radius 5px
    transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)
    position relative
    overflow hidden
    letter-spacing -0.01em
    white-space nowrap

    // 点击效果
    &:active
      transform scale(0.98)

// 空状态（macOS 风格）
.empty-state
  text-align center
  padding 60px 20px
  color var(--text-secondary)
  flex 1
  display flex
  flex-direction column
  justify-content center
  align-items center

  .empty-icon
    width 64px
    height 64px
    margin 0 auto 20px
    display flex
    align-items center
    justify-content center
    background var(--bg-tertiary)
    border-radius 50%
    opacity 0.5
    border 2px dashed var(--border)
    transition all 0.15s cubic-bezier(0.4, 0, 0.2, 1)

    // 使用 SVG 图标
    &::before
      content ''
      width 36px
      height 36px
      background-image url('src/imgs/svg/flash-drive.svg')
      background-size contain
      background-repeat no-repeat
      background-position center
      filter grayscale(1) opacity(0.4)

  p
    font-size 15px
    margin 8px 0
    color var(--text-primary)
    font-weight 500
    letter-spacing -0.01em

  .empty-hint
    font-size 13px
    color var(--text-secondary)
    margin-top 6px

// 已可读写设备列表的特殊样式（现在整合到统一列表中）
.device-item.read-write-device
  border-color var(--success)
  background rgba(52, 199, 89, 0.05)

  &:hover
    background rgba(52, 199, 89, 0.08)
    border-color var(--success)

// 浅色模式调整
body.light-theme
  .device-item
    &:hover
      box-shadow 0 1px 2px var(--light-shadow)

  .device-info
    background var(--light-bg-tertiary)

  .empty-state
    .empty-icon
      background var(--light-bg-tertiary)
      border-color var(--light-border)
